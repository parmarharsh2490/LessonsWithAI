<p-dialog
  header="Select Voice"
  [draggable]="false"
  [modal]="true"
  [visible]="visible()"
  (visibleChange)="visible.set($event)"
  (onHide)="onHide.emit()"
  [breakpoints]="{ '1199px': '90vw', '575px': '95vw' }"
  [style]="{ width: '50rem' }"
>
  <div
    class="flex flex-col sm:flex-row items-stretch sm:items-center justify-between py-3 sm:py-4 px-2 gap-2 sm:gap-2"
  >
    <div class="w-full sm:flex-1">
      <input
        type="search"
        pInputText
        [ngModel]="searchTerm()"
        (ngModelChange)="searchTerm.set($event)"
        placeholder="Search Voice"
        class="w-full"
      />
    </div>
    <div class="w-full sm:flex-1">
      <p-select
        [appendTo]="'body'"
        [options]="genders()"
        [ngModel]="selectedGender()"
        (ngModelChange)="selectedGender.set($event)"
        placeholder="Select Gender"
        class="w-full"
      />
    </div>
    <div class="w-full sm:flex-1">
      <p-select
        [appendTo]="'body'"
        [options]="accents()"
        [ngModel]="selectedAccent()"
        (ngModelChange)="selectedAccent.set($event)"
        placeholder="Select Accent"
        class="w-full"
      />
    </div>
    <div class="w-full sm:flex-1">
      <p-select
        [appendTo]="'body'"
        [options]="tones()"
        [ngModel]="selectedTone()"
        (ngModelChange)="selectedTone.set($event)"
        placeholder="Select Tone"
        class="w-full"
      />
    </div>
  </div>
  <div
    class="grid grid-cols-1 sm:grid-cols-2 w-full gap-2 sm:gap-3 max-h-[60vh] overflow-y-auto"
  >
    @for (voice of voices(); track $index) {
      <div
        (click)="selectedVoice.set(voice)"
        [class]="{
          'bg-primary': voice.id === selectedVoice()?.id,
          'bg-dark': voice.id !== selectedVoice()?.id,
        }"
        class="flex items-center justify-between rounded p-3 sm:p-4 cursor-pointer"
      >
        <div class="flex flex-col gap-1 sm:gap-2 flex-1 min-w-0">
          <div class="flex flex-wrap gap-1 sm:gap-2 items-center">
            <h5 class="font-bold text-base sm:text-lg truncate">
              {{ voice.name }}
            </h5>
            <span class="text-secondary text-xs sm:text-sm">
              {{ voice.accent }}</span
            >
          </div>
          <div class="flex flex-wrap gap-1 sm:gap-2">
            <span class="text-secondary text-xs sm:text-sm">
              {{ voice.tone }}
            </span>
            <span class="text-secondary text-xs sm:text-sm">
              {{ voice.gender }}
            </span>
          </div>
        </div>
        <div class="flex-shrink-0 ml-2">
          <i
            [class]="{ 'text-white': voice.id === selectedVoice()?.id }"
            class="pi pi-play text-primary cursor-pointer font-bold text-lg sm:text-xl"
          ></i>
        </div>
      </div>
    }
  </div>

  <div class="mt-2">
    <div class="flex justify-end">
      <p-button [label]="'Submit'" (click)="submit()"></p-button>
    </div>
  </div>
</p-dialog>
